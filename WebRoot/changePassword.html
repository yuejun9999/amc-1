<!DOCTYPE html>
<html>
  <head>

    <meta name="content-type" content="text/html; charset=UTF-8">

  </head>
  
  <body>
  <div class="modal fade" id="changePasswordModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">修改密码</h4>
      </div>
      <div class="modal-body">
      	<div id="changePasswordAlert"></div>
      	<form id="changepwForm" target="empty" method="post">
  <div class="form-group">
    <label for="oldpwInput">请输入当前密码</label>
    <input type="password" class="form-control" id="oldpwInput" placeholder="原密码" required="required">
  </div>
  <div class="form-group">
    <label for="newpwInput">请输入新密码</label>
    <input type="password" class="form-control" id="newpwInput" placeholder="新密码" required="required">
  </div>
  <div class="form-group">
    <label for="newpwConfirmInput">请确认新密码</label>
    <input type="password" class="form-control" id="newpwConfirmInput" placeholder="确认密码" required="required">
  </div>
</form>
    </div>
     <div class="modal-footer">
     	<button id="changepwButton" type="submit" class="btn btn-primary">确认修改</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
      </div>
    </div>
  </div>
</div>
    <script type="text/javascript">
    $("#changepwButton").click(function(e){
    	var oldpw = $("#oldpwInput").val();
    	var newpw = $("#newpwInput").val();
    	var confirmNewpw = $("#newpwConfirmInput").val();
    	var userid = $("#userID").text();
    	console.log("ChangePasswordForm is submitted!");
    	data="userID="+userid+"&oldPassword="+oldpw+"&newPassword="+newpw+"&confirmNewPassword="+confirmNewpw;
    	console.log(data);
    	$.ajax({
    		url: "changePassword.do",
    		method: "POST",
    		data: data,
    		success: function(msg){
    			if (msg=="SUCCESS"){
    				$("#changePasswordAlert").removeClass();
    				$("#changePasswordAlert").addClass("alert alert-success");
    				$("#changePasswordAlert").text("操作成功！").show().fadeOut(5000);
    			}
    			else {
    				$("#changePasswordAlert").removeClass();
    				$("#changePasswordAlert").addClass("alert alert-danger");
    				$("#changePasswordAlert").text(msg).show().fadeOut(5000);

    			}
    		}
    	});
    
    });
    
    $("#changePasswordModal").modal("show");
    </script>
  </body>
</html>